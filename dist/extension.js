/*! For license information please see extension.js.LICENSE.txt */
(()=>{var e={7:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFullPageOrDatabase=t.isFullComment=t.isFullUser=t.isFullPage=t.isFullDatabase=t.isFullBlock=t.iteratePaginatedAPI=t.collectPaginatedAPI=t.isNotionClientError=t.RequestTimeoutError=t.UnknownHTTPResponseError=t.APIResponseError=t.ClientErrorCode=t.APIErrorCode=t.LogLevel=t.Client=void 0;var o=r(600);Object.defineProperty(t,"Client",{enumerable:!0,get:function(){return o.default}});var n=r(70);Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return n.LogLevel}});var a=r(848);Object.defineProperty(t,"APIErrorCode",{enumerable:!0,get:function(){return a.APIErrorCode}}),Object.defineProperty(t,"ClientErrorCode",{enumerable:!0,get:function(){return a.ClientErrorCode}}),Object.defineProperty(t,"APIResponseError",{enumerable:!0,get:function(){return a.APIResponseError}}),Object.defineProperty(t,"UnknownHTTPResponseError",{enumerable:!0,get:function(){return a.UnknownHTTPResponseError}}),Object.defineProperty(t,"RequestTimeoutError",{enumerable:!0,get:function(){return a.RequestTimeoutError}}),Object.defineProperty(t,"isNotionClientError",{enumerable:!0,get:function(){return a.isNotionClientError}});var i=r(390);Object.defineProperty(t,"collectPaginatedAPI",{enumerable:!0,get:function(){return i.collectPaginatedAPI}}),Object.defineProperty(t,"iteratePaginatedAPI",{enumerable:!0,get:function(){return i.iteratePaginatedAPI}}),Object.defineProperty(t,"isFullBlock",{enumerable:!0,get:function(){return i.isFullBlock}}),Object.defineProperty(t,"isFullDatabase",{enumerable:!0,get:function(){return i.isFullDatabase}}),Object.defineProperty(t,"isFullPage",{enumerable:!0,get:function(){return i.isFullPage}}),Object.defineProperty(t,"isFullUser",{enumerable:!0,get:function(){return i.isFullUser}}),Object.defineProperty(t,"isFullComment",{enumerable:!0,get:function(){return i.isFullComment}}),Object.defineProperty(t,"isFullPageOrDatabase",{enumerable:!0,get:function(){return i.isFullPageOrDatabase}})},19:(e,t,r)=>{var o=r(398),n=r(901),a=r(899);e.exports={registerCommands:function(e,t,r){e.subscriptions.push(o.commands.registerCommand("TODOtoNOTION.setCredentials",function(){r("Executing command: TODOtoNOTION.setCredentials"),n.setCredentials(e)})),e.subscriptions.push(o.commands.registerCommand("TODOtoNOTION.syncFromNotion",function(){r("Executing command: TODOtoNOTION.syncFromNotion"),t()})),e.subscriptions.push(o.commands.registerCommand("TODOtoNOTION.forceSync",function(){r("Executing command: TODOtoNOTION.forceSync"),t()})),e.subscriptions.push(o.commands.registerCommand("TODOtoNOTION.listProperties",function(){r("Executing command: TODOtoNOTION.listProperties"),"function"==typeof n.listDatabaseProperties?n.listDatabaseProperties(e).then(function(e){e&&o.window.showInformationMessage("Notion database properties listed in the output channel.")}).catch(function(e){o.window.showErrorMessage("Failed to list Notion database properties: "+e.message),r("Error executing listDatabaseProperties: "+e.message)}):(o.window.showErrorMessage("Notion integration error: listDatabaseProperties function is not defined."),r("Notion integration error: listDatabaseProperties function is not defined on notion object."))}))},registerEventListeners:function(e,t,r,n){e.subscriptions.push(o.window.onDidChangeActiveTextEditor(function(e){e&&e.document&&(t[e.document.uri.toString()]=e.document)})),e.subscriptions.push(o.workspace.onDidSaveTextDocument(function(t){"file"!==t.uri.scheme&&"untitled"!==t.uri.scheme||a.syncTodosOnSave(t,e,r,n)})),e.subscriptions.push(o.workspace.onDidOpenTextDocument(function(e){"file"!==e.uri.scheme&&"untitled"!==e.uri.scheme||(t[e.uri.toString()]=e)})),e.subscriptions.push(o.workspace.onDidCloseTextDocument(function(e){delete t[e.uri.toString()]}))}}},70:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logLevelSeverity=t.makeConsoleLogger=t.LogLevel=void 0;const o=r(98);var n;!function(e){e.DEBUG="debug",e.INFO="info",e.WARN="warn",e.ERROR="error"}(n=t.LogLevel||(t.LogLevel={})),t.makeConsoleLogger=function(e){return(t,r,o)=>{console[t](`${e} ${t}:`,r,o)}},t.logLevelSeverity=function(e){switch(e){case n.DEBUG:return 20;case n.INFO:return 40;case n.WARN:return 60;case n.ERROR:return 80;default:return(0,o.assertNever)(e)}}},98:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=t.pick=t.assertNever=void 0,t.assertNever=function(e){throw new Error(`Unexpected value should never occur: ${e}`)},t.pick=function(e,t){const r=t.map(t=>[t,null==e?void 0:e[t]]);return Object.fromEntries(r)},t.isObject=function(e){return"object"==typeof e&&null!==e}},155:(e,t,r)=>{r(398);var o=r(347);e.exports={parseTodos:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=[],n=o.getTodoRegex(),a=/\[id:([a-z0-9-]+)\]/i;t("Parsing TODOs in document: ".concat(e.uri.fsPath,", lineCount: ").concat(e.lineCount));for(var i=0;i<e.lineCount&&r.length<50;i++){var s=e.lineAt(i).text;if(n.exec(s)){var c=s.match(a),u=s.match(/\/\/\s*(TODO|FIXME|BUG|HACK|XXX)/i),d=u?u[1].toUpperCase():"TODO",l=s.trim();l=(l=l.replace(/\/\/\s*(TODO|FIXME|BUG|HACK|XXX)\s*[:\s]*/i,"").trim()).replace(/\[id:[a-z0-9-]+\]/i,"").trim();var p=e.uri.fsPath,h=i+1,f=null;c&&c[1]?f=c[1]:(f=o.generateRandomId(),t&&t("Generated new TODO ID: ".concat(f," for line ").concat(i+1)));var m={text:l,type:d,status:"Not started",filePath:p,lineNumber:h,line:i,column:0,id:f};r.push(m)}}return r.length>=50&&t("Reached TODO limit of ".concat(50," in document: ").concat(e.uri.fsPath,". Stopping parsing to prevent memory issues.")),t("Finished parsing ".concat(r.length," TODOs in document: ").concat(e.uri.fsPath)),r},scanDocumentsForTodos:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=[],n=o.getTodoRegex(),a=/\/\/\s*(TODO|FIXME|BUG|HACK|XXX)\s*\[id:([a-z0-9-]+)\]\s*(.*)/i;return t("Scanning TODOs across ".concat(Object.values(e).length," open documents")),Object.values(e).forEach(function(t){if("file"===t.uri.scheme||"untitled"===t.uri.scheme)for(var o,i=t.getText();null!==(o=n.exec(i))&&r.length<50*(Object.values(e).indexOf(t)+1);){for(;"\n"===i[o.index]||"\r"===i[o.index];)o.index++,o[0]=o[0].substring(1);var s=o.index,c=t.positionAt(s),u=t.lineAt(c.line).text,d=u.match(a),l={text:u.trim(),line:c.line,column:c.character,id:d?d[2]:null,uri:t.uri};r.push(l)}}),r.length>=maxTodos*Object.values(e).length&&t("Reached total TODO limit of ".concat(maxTodos*Object.values(e).length," across open documents. Stopping scanning to prevent memory issues.")),t("Finished scanning ".concat(r.length," TODOs across open documents")),r}}},347:(e,t,r)=>{r(398),e.exports={generateRandomId:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},getTodoRegex:function(){var e=["TODO","FIXME","BUG","HACK","XXX"].join("|");return new RegExp("//\\s*(".concat(e,")\\s*"),"i")}}},390:(e,t)=>{"use strict";async function*r(e,t){let r=t.start_cursor;do{const o=await e({...t,start_cursor:r});yield*o.results,r=o.next_cursor}while(r)}function o(e){return"page"===e.object&&"url"in e}function n(e){return"database"===e.object&&"title"in e}Object.defineProperty(t,"__esModule",{value:!0}),t.isMentionRichTextItemResponse=t.isEquationRichTextItemResponse=t.isTextRichTextItemResponse=t.isFullComment=t.isFullUser=t.isFullPageOrDatabase=t.isFullDatabase=t.isFullPage=t.isFullBlock=t.collectPaginatedAPI=t.iteratePaginatedAPI=void 0,t.iteratePaginatedAPI=r,t.collectPaginatedAPI=async function(e,t){const o=[];for await(const n of r(e,t))o.push(n);return o},t.isFullBlock=function(e){return"block"===e.object&&"type"in e},t.isFullPage=o,t.isFullDatabase=n,t.isFullPageOrDatabase=function(e){return"database"===e.object?n(e):o(e)},t.isFullUser=function(e){return"type"in e},t.isFullComment=function(e){return"created_by"in e},t.isTextRichTextItemResponse=function(e){return"text"===e.type},t.isEquationRichTextItemResponse=function(e){return"equation"===e.type},t.isMentionRichTextItemResponse=function(e){return"mention"===e.type}},398:e=>{"use strict";e.exports=require("vscode")},420:(e,t,r)=>{function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,s=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(o=a.call(r)).done)&&(s.push(o.value),s.length!==t);c=!0);}catch(e){u=!0,n=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw n}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function a(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",n=r.toStringTag||"@@toStringTag";function s(r,o,n,a){var s=o&&o.prototype instanceof u?o:u,d=Object.create(s.prototype);return i(d,"_invoke",function(r,o,n){var a,i,s,u=0,d=n||[],l=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return a=t,i=0,s=e,p.n=r,c}};function h(r,o){for(i=r,s=o,t=0;!l&&u&&!n&&t<d.length;t++){var n,a=d[t],h=p.p,f=a[2];r>3?(n=f===o)&&(s=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=h&&((n=r<2&&h<a[1])?(i=0,p.v=o,p.n=a[1]):h<f&&(n=r<3||a[0]>o||o>f)&&(a[4]=r,a[5]=o,p.n=f,i=0))}if(n||r>1)return c;throw l=!0,o}return function(n,d,f){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&h(d,f),i=d,s=f;(t=i<2?e:s)||!l;){a||(i?i<3?(i>1&&(p.n=-1),h(i,s)):p.n=s:p.v=s);try{if(u=2,a){if(i||(n="next"),t=a[n]){if(!(t=t.call(a,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(s=TypeError("The iterator does not provide a '"+n+"' method"),i=1);a=e}else if((t=(l=p.n<0)?s:r.call(o,p))!==c)break}catch(t){a=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,n,a),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var p=[][o]?t(t([][o]())):(i(t={},o,function(){return this}),t),h=l.prototype=u.prototype=Object.create(p);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,i(e,n,"GeneratorFunction")),e.prototype=Object.create(h),e}return d.prototype=l,i(h,"constructor",l),i(l,"constructor",d),d.displayName="GeneratorFunction",i(l,n,"GeneratorFunction"),i(h),i(h,n,"Generator"),i(h,o,function(){return this}),i(h,"toString",function(){return"[object Generator]"}),(a=function(){return{w:s,m:f}})()}function i(e,t,r,o){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}i=function(e,t,r,o){if(t)n?n(e,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[t]=r;else{var a=function(t,r){i(e,t,function(e){return this._invoke(t,r,e)})};a("next",0),a("throw",1),a("return",2)}},i(e,t,r,o)}function s(e,t,r,o,n,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function c(e){return function(){var t=this,r=arguments;return new Promise(function(o,n){var a=e.apply(t,r);function i(e){s(a,o,n,i,c,"next",e)}function c(e){s(a,o,n,i,c,"throw",e)}i(void 0)})}}var u,d=r(398),l=r(7).Client;function p(){return(p=c(a().m(function e(t,r,o){var n,i,s,c,p;return a().w(function(e){for(;;)switch(e.n){case 0:if(e.p=0,n=r.token,i=r.databaseId,n&&i){e.n=1;break}return d.window.showErrorMessage("Notion integration not configured. Please set credentials first."),o("Notion credentials not configured for fetchNotionState."),e.a(2,[]);case 1:return u=new l({auth:n}),e.n=2,u.databases.query({database_id:i});case 2:return s=e.v,c=s.results.map(function(e){var t="Untitled Task",r="",n="",a=void 0,i="",s="";try{e.properties.Name&&e.properties.Name.title&&e.properties.Name.title.length>0&&(t=e.properties.Name.title[0].plain_text),e.properties.TODO_ID&&e.properties.TODO_ID.rich_text&&e.properties.TODO_ID.rich_text.length>0&&(r=e.properties.TODO_ID.rich_text[0].plain_text),e.properties["File Path"]&&e.properties["File Path"].rich_text&&e.properties["File Path"].rich_text.length>0&&(n=e.properties["File Path"].rich_text[0].plain_text),e.properties["Line Number"]&&"number"==typeof e.properties["Line Number"].number&&(a=e.properties["Line Number"].number),e.properties.Type&&e.properties.Type.select&&e.properties.Type.select.name&&(i=e.properties.Type.select.name),e.properties.Status&&e.properties.Status.select&&e.properties.Status.select.name&&(s=e.properties.Status.select.name)}catch(t){o("Error accessing task details for page "+e.id+": "+t.message)}return{id:e.id,customId:r,text:t,filePath:n,lineNumber:a,type:i,status:s}}),o("Fetched "+c.length+" tasks from Notion database."),d.window.showInformationMessage("Fetched "+c.length+" tasks from Notion."),e.a(2,c);case 3:return e.p=3,(p=e.v).message.includes("Could not find database with ID")?(d.window.showErrorMessage("Failed to fetch Notion state: Database ID ".concat(r.databaseId," not found. Ensure the database is shared with your integration."),"Set Credentials").then(function(e){"Set Credentials"===e&&d.commands.executeCommand("TODOtoNOTION.setCredentials")}),o("Error fetching Notion state: Database not found - "+p.message)):p.message.includes("API token is invalid")?(d.window.showErrorMessage("Failed to fetch Notion state: Invalid API token. Please update your credentials.","Set Credentials").then(function(e){"Set Credentials"===e&&d.commands.executeCommand("TODOtoNOTION.setCredentials")}),o("Error fetching Notion state: Invalid API token - "+p.message)):(d.window.showErrorMessage("Failed to fetch Notion state: "+p.message),o("Error fetching Notion state: "+p.message)),e.a(2,[])}},e,null,[[0,3]])}))).apply(this,arguments)}function h(){return(h=c(a().m(function e(t,r,n){var i,s,c,p,h,f,m,g,y,b,v;return a().w(function(e){for(;;)switch(e.n){case 0:if(e.p=0,i=r.token,s=r.databaseId,i&&s){e.n=1;break}return d.window.showErrorMessage("Notion integration not configured. Please set credentials first."),n("Notion credentials not configured for listDatabaseProperties."),e.a(2,null);case 1:return u||(u=new l({auth:i})),e.n=2,u.databases.retrieve({database_id:s});case 2:for(c=e.v,p=c.properties,h={},f=0,m=Object.entries(p);f<m.length;f++)g=o(m[f],2),y=g[0],b=g[1],h[y]=b.type;return n("Retrieved database properties schema from Notion."),e.a(2,h);case 3:return e.p=3,(v=e.v).message.includes("API token is invalid")?(d.window.showErrorMessage("Failed to retrieve database properties: Invalid API token. Please update your credentials.","Set Credentials").then(function(e){"Set Credentials"===e&&d.commands.executeCommand("TODOtoNOTION.setCredentials")}),n("Error retrieving database properties: Invalid API token - "+v.message)):(d.window.showErrorMessage("Failed to retrieve database properties: "+v.message),n("Error retrieving database properties: "+v.message)),e.a(2,null)}},e,null,[[0,3]])}))).apply(this,arguments)}e.exports={fetchNotionState:function(e,t,r){return p.apply(this,arguments)},listDatabaseProperties:function(e,t,r){return h.apply(this,arguments)},getNotionClient:function(e){return u||(u=new l({auth:e})),u}}},585:e=>{"use strict";e.exports=JSON.parse('{"name":"@notionhq/client","version":"3.1.3","description":"A simple and easy to use client for the Notion API","engines":{"node":">=18"},"homepage":"https://developers.notion.com/docs/getting-started","bugs":{"url":"https://github.com/makenotion/notion-sdk-js/issues"},"repository":{"type":"git","url":"https://github.com/makenotion/notion-sdk-js/"},"keywords":["notion","notionapi","rest","notion-api"],"main":"./build/src","types":"./build/src/index.d.ts","scripts":{"prepare":"npm run build","prepublishOnly":"npm run checkLoggedIn && npm run lint && npm run test","build":"tsc","prettier":"prettier --write .","lint":"prettier --check . && eslint . --ext .ts && cspell \'**/*\' ","test":"jest ./test","check-links":"git ls-files | grep md$ | xargs -n 1 markdown-link-check","prebuild":"npm run clean","clean":"rm -rf ./build","checkLoggedIn":"./scripts/verifyLoggedIn.sh"},"author":"","license":"MIT","files":["build/package.json","build/src/**"],"devDependencies":{"@types/jest":"^28.1.4","@typescript-eslint/eslint-plugin":"^5.39.0","@typescript-eslint/parser":"^5.39.0","cspell":"^5.4.1","eslint":"^7.24.0","jest":"^28.1.2","markdown-link-check":"^3.8.7","prettier":"^2.8.8","ts-jest":"^28.0.5","typescript":"^4.8.4"}}')},600:function(e,t,r){"use strict";var o,n,a,i,s,c,u,d,l,p=this&&this.__classPrivateFieldSet||function(e,t,r,o,n){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?n.call(e,r):n?n.value=r:t.set(e,r),r},h=this&&this.__classPrivateFieldGet||function(e,t,r,o){if("a"===r&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?o:"a"===r?o.call(e):o?o.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const f=r(70),m=r(848),g=r(98),y=r(916),b=r(585);class v{constructor(e){var t,r,h,m,O,w;o.set(this,void 0),n.set(this,void 0),a.set(this,void 0),i.set(this,void 0),s.set(this,void 0),c.set(this,void 0),u.set(this,void 0),d.set(this,void 0),l.set(this,void 0),this.blocks={retrieve:e=>this.request({path:y.getBlock.path(e),method:y.getBlock.method,query:(0,g.pick)(e,y.getBlock.queryParams),body:(0,g.pick)(e,y.getBlock.bodyParams),auth:null==e?void 0:e.auth}),update:e=>this.request({path:y.updateBlock.path(e),method:y.updateBlock.method,query:(0,g.pick)(e,y.updateBlock.queryParams),body:(0,g.pick)(e,y.updateBlock.bodyParams),auth:null==e?void 0:e.auth}),delete:e=>this.request({path:y.deleteBlock.path(e),method:y.deleteBlock.method,query:(0,g.pick)(e,y.deleteBlock.queryParams),body:(0,g.pick)(e,y.deleteBlock.bodyParams),auth:null==e?void 0:e.auth}),children:{append:e=>this.request({path:y.appendBlockChildren.path(e),method:y.appendBlockChildren.method,query:(0,g.pick)(e,y.appendBlockChildren.queryParams),body:(0,g.pick)(e,y.appendBlockChildren.bodyParams),auth:null==e?void 0:e.auth}),list:e=>this.request({path:y.listBlockChildren.path(e),method:y.listBlockChildren.method,query:(0,g.pick)(e,y.listBlockChildren.queryParams),body:(0,g.pick)(e,y.listBlockChildren.bodyParams),auth:null==e?void 0:e.auth})}},this.databases={list:e=>this.request({path:y.listDatabases.path(),method:y.listDatabases.method,query:(0,g.pick)(e,y.listDatabases.queryParams),body:(0,g.pick)(e,y.listDatabases.bodyParams),auth:null==e?void 0:e.auth}),retrieve:e=>this.request({path:y.getDatabase.path(e),method:y.getDatabase.method,query:(0,g.pick)(e,y.getDatabase.queryParams),body:(0,g.pick)(e,y.getDatabase.bodyParams),auth:null==e?void 0:e.auth}),query:e=>this.request({path:y.queryDatabase.path(e),method:y.queryDatabase.method,query:(0,g.pick)(e,y.queryDatabase.queryParams),body:(0,g.pick)(e,y.queryDatabase.bodyParams),auth:null==e?void 0:e.auth}),create:e=>this.request({path:y.createDatabase.path(),method:y.createDatabase.method,query:(0,g.pick)(e,y.createDatabase.queryParams),body:(0,g.pick)(e,y.createDatabase.bodyParams),auth:null==e?void 0:e.auth}),update:e=>this.request({path:y.updateDatabase.path(e),method:y.updateDatabase.method,query:(0,g.pick)(e,y.updateDatabase.queryParams),body:(0,g.pick)(e,y.updateDatabase.bodyParams),auth:null==e?void 0:e.auth})},this.pages={create:e=>this.request({path:y.createPage.path(),method:y.createPage.method,query:(0,g.pick)(e,y.createPage.queryParams),body:(0,g.pick)(e,y.createPage.bodyParams),auth:null==e?void 0:e.auth}),retrieve:e=>this.request({path:y.getPage.path(e),method:y.getPage.method,query:(0,g.pick)(e,y.getPage.queryParams),body:(0,g.pick)(e,y.getPage.bodyParams),auth:null==e?void 0:e.auth}),update:e=>this.request({path:y.updatePage.path(e),method:y.updatePage.method,query:(0,g.pick)(e,y.updatePage.queryParams),body:(0,g.pick)(e,y.updatePage.bodyParams),auth:null==e?void 0:e.auth}),properties:{retrieve:e=>this.request({path:y.getPageProperty.path(e),method:y.getPageProperty.method,query:(0,g.pick)(e,y.getPageProperty.queryParams),body:(0,g.pick)(e,y.getPageProperty.bodyParams),auth:null==e?void 0:e.auth})}},this.users={retrieve:e=>this.request({path:y.getUser.path(e),method:y.getUser.method,query:(0,g.pick)(e,y.getUser.queryParams),body:(0,g.pick)(e,y.getUser.bodyParams),auth:null==e?void 0:e.auth}),list:e=>this.request({path:y.listUsers.path(),method:y.listUsers.method,query:(0,g.pick)(e,y.listUsers.queryParams),body:(0,g.pick)(e,y.listUsers.bodyParams),auth:null==e?void 0:e.auth}),me:e=>this.request({path:y.getSelf.path(),method:y.getSelf.method,query:(0,g.pick)(e,y.getSelf.queryParams),body:(0,g.pick)(e,y.getSelf.bodyParams),auth:null==e?void 0:e.auth})},this.comments={create:e=>this.request({path:y.createComment.path(),method:y.createComment.method,query:(0,g.pick)(e,y.createComment.queryParams),body:(0,g.pick)(e,y.createComment.bodyParams),auth:null==e?void 0:e.auth}),list:e=>this.request({path:y.listComments.path(),method:y.listComments.method,query:(0,g.pick)(e,y.listComments.queryParams),body:(0,g.pick)(e,y.listComments.bodyParams),auth:null==e?void 0:e.auth})},this.fileUploads={create:e=>this.request({path:y.createFileUpload.path(),method:y.createFileUpload.method,query:(0,g.pick)(e,y.createFileUpload.queryParams),body:(0,g.pick)(e,y.createFileUpload.bodyParams),auth:null==e?void 0:e.auth}),retrieve:e=>this.request({path:y.getFileUpload.path(e),method:y.getFileUpload.method,query:(0,g.pick)(e,y.getFileUpload.queryParams),auth:null==e?void 0:e.auth}),list:e=>this.request({path:y.listFileUploads.path(),method:y.listFileUploads.method,query:(0,g.pick)(e,y.listFileUploads.queryParams),auth:null==e?void 0:e.auth}),send:e=>this.request({path:y.sendFileUpload.path(e),method:y.sendFileUpload.method,query:(0,g.pick)(e,y.sendFileUpload.queryParams),formDataParams:(0,g.pick)(e,y.sendFileUpload.formDataParams),auth:null==e?void 0:e.auth}),complete:e=>this.request({path:y.completeFileUpload.path(e),method:y.completeFileUpload.method,query:(0,g.pick)(e,y.completeFileUpload.queryParams),auth:null==e?void 0:e.auth})},this.search=e=>this.request({path:y.search.path(),method:y.search.method,query:(0,g.pick)(e,y.search.queryParams),body:(0,g.pick)(e,y.search.bodyParams),auth:null==e?void 0:e.auth}),this.oauth={token:e=>this.request({path:y.oauthToken.path(),method:y.oauthToken.method,query:(0,g.pick)(e,y.oauthToken.queryParams),body:(0,g.pick)(e,y.oauthToken.bodyParams),auth:{client_id:e.client_id,client_secret:e.client_secret}}),introspect:e=>this.request({path:y.oauthIntrospect.path(),method:y.oauthIntrospect.method,query:(0,g.pick)(e,y.oauthIntrospect.queryParams),body:(0,g.pick)(e,y.oauthIntrospect.bodyParams),auth:{client_id:e.client_id,client_secret:e.client_secret}}),revoke:e=>this.request({path:y.oauthRevoke.path(),method:y.oauthRevoke.method,query:(0,g.pick)(e,y.oauthRevoke.queryParams),body:(0,g.pick)(e,y.oauthRevoke.bodyParams),auth:{client_id:e.client_id,client_secret:e.client_secret}})},p(this,o,null==e?void 0:e.auth,"f"),p(this,n,null!==(t=null==e?void 0:e.logLevel)&&void 0!==t?t:f.LogLevel.WARN,"f"),p(this,a,null!==(r=null==e?void 0:e.logger)&&void 0!==r?r:(0,f.makeConsoleLogger)(b.name),"f"),p(this,i,`${null!==(h=null==e?void 0:e.baseUrl)&&void 0!==h?h:"https://api.notion.com"}/v1/`,"f"),p(this,s,null!==(m=null==e?void 0:e.timeoutMs)&&void 0!==m?m:6e4,"f"),p(this,c,null!==(O=null==e?void 0:e.notionVersion)&&void 0!==O?O:v.defaultNotionVersion,"f"),p(this,u,null!==(w=null==e?void 0:e.fetch)&&void 0!==w?w:fetch,"f"),p(this,d,null==e?void 0:e.agent,"f"),p(this,l,`notionhq-client/${b.version}`,"f")}async request(e){const{path:t,method:r,query:o,body:n,formDataParams:a,auth:p}=e;this.log(f.LogLevel.INFO,"request start",{method:r,path:t});const g=n&&0!==Object.entries(n).length?JSON.stringify(n):void 0,y=new URL(`${h(this,i,"f")}${t}`);if(o)for(const[e,t]of Object.entries(o))if(void 0!==t)if(Array.isArray(t))for(const r of t)y.searchParams.append(e,decodeURIComponent(r));else y.searchParams.append(e,String(t));let b;if("object"==typeof p){const e=`${p.client_id}:${p.client_secret}`;b={authorization:`Basic ${Buffer.from(e).toString("base64")}`}}else b=this.authAsHeaders(p);const v={...b,"Notion-Version":h(this,c,"f"),"user-agent":h(this,l,"f")};let O;if(void 0!==g&&(v["content-type"]="application/json"),a){delete v["content-type"],O=new FormData;for(const[e,t]of Object.entries(a))"string"==typeof t?O.append(e,t):"object"==typeof t&&O.append(e,"object"==typeof t.data?t.data:new Blob([t.data]),t.filename)}try{const e=await m.RequestTimeoutError.rejectAfterTimeout(h(this,u,"f").call(this,y.toString(),{method:r.toUpperCase(),headers:v,body:null!=g?g:O,agent:h(this,d,"f")}),h(this,s,"f")),o=await e.text();if(!e.ok)throw(0,m.buildRequestError)(e,o);const n=JSON.parse(o);return this.log(f.LogLevel.INFO,"request success",{method:r,path:t}),n}catch(e){if(!(0,m.isNotionClientError)(e))throw e;throw this.log(f.LogLevel.WARN,"request fail",{code:e.code,message:e.message}),(0,m.isHTTPResponseError)(e)&&this.log(f.LogLevel.DEBUG,"failed response body",{body:e.body}),e}}log(e,t,r){(0,f.logLevelSeverity)(e)>=(0,f.logLevelSeverity)(h(this,n,"f"))&&h(this,a,"f").call(this,e,t,r)}authAsHeaders(e){const t={},r=null!=e?e:h(this,o,"f");return void 0!==r&&(t.authorization=`Bearer ${r}`),t}}t.default=v,o=new WeakMap,n=new WeakMap,a=new WeakMap,i=new WeakMap,s=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,l=new WeakMap,v.defaultNotionVersion="2022-06-28"},611:(e,t,r)=>{function o(){var e,t,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,o,a,i){var s=o&&o.prototype instanceof u?o:u,d=Object.create(s.prototype);return n(d,"_invoke",function(r,o,n){var a,i,s,u=0,d=n||[],l=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return a=t,i=0,s=e,p.n=r,c}};function h(r,o){for(i=r,s=o,t=0;!l&&u&&!n&&t<d.length;t++){var n,a=d[t],h=p.p,f=a[2];r>3?(n=f===o)&&(s=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=h&&((n=r<2&&h<a[1])?(i=0,p.v=o,p.n=a[1]):h<f&&(n=r<3||a[0]>o||o>f)&&(a[4]=r,a[5]=o,p.n=f,i=0))}if(n||r>1)return c;throw l=!0,o}return function(n,d,f){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&h(d,f),i=d,s=f;(t=i<2?e:s)||!l;){a||(i?i<3?(i>1&&(p.n=-1),h(i,s)):p.n=s:p.v=s);try{if(u=2,a){if(i||(n="next"),t=a[n]){if(!(t=t.call(a,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(s=TypeError("The iterator does not provide a '"+n+"' method"),i=1);a=e}else if((t=(l=p.n<0)?s:r.call(o,p))!==c)break}catch(t){a=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,a,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var p=[][a]?t(t([][a]())):(n(t={},a,function(){return this}),t),h=l.prototype=u.prototype=Object.create(p);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,n(e,i,"GeneratorFunction")),e.prototype=Object.create(h),e}return d.prototype=l,n(h,"constructor",l),n(l,"constructor",d),d.displayName="GeneratorFunction",n(l,i,"GeneratorFunction"),n(h),n(h,i,"Generator"),n(h,a,function(){return this}),n(h,"toString",function(){return"[object Generator]"}),(o=function(){return{w:s,m:f}})()}function n(e,t,r,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}n=function(e,t,r,o){if(t)a?a(e,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[t]=r;else{var i=function(t,r){n(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}},n(e,t,r,o)}function a(e,t,r,o,n,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function i(e){return function(){var t=this,r=arguments;return new Promise(function(o,n){var i=e.apply(t,r);function s(e){a(i,o,n,s,c,"next",e)}function c(e){a(i,o,n,s,c,"throw",e)}s(void 0)})}}var s=r(398),c="notionIntegrationToken";function u(){return(u=i(o().m(function e(t,r){var n,a,i,u,d;return o().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,r("Setting Notion credentials..."),n=l(),a="".concat(c,"_").concat(n),e.n=1,s.window.showInputBox({prompt:"Enter your Notion Integration Token for this project",placeHolder:"Token",password:!0});case 1:if(!(i=e.v)){e.n=3;break}return e.n=2,t.secrets.store(a,i);case 2:s.window.showInformationMessage("Notion Integration Token saved securely for this project."),r("Notion token saved successfully for workspace: "+n),e.n=4;break;case 3:return s.window.showWarningMessage("No token provided. Notion integration will not work without a token for this project."),r("No Notion token provided by user for workspace: "+n),e.a(2,!1);case 4:return e.n=5,s.window.showInputBox({prompt:"Enter your Notion Database ID for Todo Sync in this project",placeHolder:"Database ID",value:s.workspace.getConfiguration("TODOtoNOTION").get("databaseId","")});case 5:if(!(u=e.v)){e.n=7;break}return e.n=6,s.workspace.getConfiguration("TODOtoNOTION").update("databaseId",u,s.ConfigurationTarget.Workspace);case 6:s.window.showInformationMessage("Notion Database ID updated for this project."),r("Notion Database ID updated to: "+u+" for workspace: "+n),e.n=8;break;case 7:s.window.showWarningMessage("No Database ID provided. Using existing or default empty value for this project."),r("No Notion Database ID provided, using existing value for workspace: "+n);case 8:return e.a(2,i&&u);case 9:return e.p=9,d=e.v,s.window.showErrorMessage("Failed to set Notion credentials: "+d.message),r("Error setting Notion credentials: "+d.message),e.a(2,!1)}},e,null,[[0,9]])}))).apply(this,arguments)}function d(){return(d=i(o().m(function e(t,r){var n,a,i,u,d;return o().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,n=l(),a="".concat(c,"_").concat(n),e.n=1,t.secrets.get(a);case 1:return i=e.v,u=s.workspace.getConfiguration("TODOtoNOTION").get("databaseId",""),r("Retrieved Notion credentials for workspace "+n+" (token: "+(i?"present":"not set")+", databaseId: "+(u||"not set")+")"),e.a(2,{token:i,databaseId:u});case 2:return e.p=2,d=e.v,s.window.showErrorMessage("Failed to retrieve Notion credentials: "+d.message),r("Error retrieving Notion credentials: "+d.message),e.a(2,{token:null,databaseId:""})}},e,null,[[0,2]])}))).apply(this,arguments)}function l(e){return s.workspace.workspaceFolders&&s.workspace.workspaceFolders.length>0?s.workspace.workspaceFolders[0].uri.fsPath:"global"}e.exports={setCredentials:function(e,t){return u.apply(this,arguments)},getCredentials:function(e,t){return d.apply(this,arguments)}}},848:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildRequestError=t.APIResponseError=t.UnknownHTTPResponseError=t.isHTTPResponseError=t.RequestTimeoutError=t.isNotionClientError=t.ClientErrorCode=t.APIErrorCode=void 0;const o=r(98);var n,a;!function(e){e.Unauthorized="unauthorized",e.RestrictedResource="restricted_resource",e.ObjectNotFound="object_not_found",e.RateLimited="rate_limited",e.InvalidJSON="invalid_json",e.InvalidRequestURL="invalid_request_url",e.InvalidRequest="invalid_request",e.ValidationError="validation_error",e.ConflictError="conflict_error",e.InternalServerError="internal_server_error",e.ServiceUnavailable="service_unavailable"}(n=t.APIErrorCode||(t.APIErrorCode={})),function(e){e.RequestTimeout="notionhq_client_request_timeout",e.ResponseError="notionhq_client_response_error"}(a=t.ClientErrorCode||(t.ClientErrorCode={}));class i extends Error{}function s(e){return(0,o.isObject)(e)&&e instanceof i}function c(e,t){return s(e)&&e.code in t}t.isNotionClientError=s;class u extends i{constructor(e="Request to Notion API has timed out"){super(e),this.code=a.RequestTimeout,this.name="RequestTimeoutError"}static isRequestTimeoutError(e){return c(e,{[a.RequestTimeout]:!0})}static rejectAfterTimeout(e,t){return new Promise((r,o)=>{const n=setTimeout(()=>{o(new u)},t);e.then(r).catch(o).then(()=>clearTimeout(n))})}}t.RequestTimeoutError=u;class d extends i{constructor(e){super(e.message),this.name="HTTPResponseError";const{code:t,status:r,headers:o,rawBodyText:n}=e;this.code=t,this.status=r,this.headers=o,this.body=n}}const l={[a.ResponseError]:!0,[n.Unauthorized]:!0,[n.RestrictedResource]:!0,[n.ObjectNotFound]:!0,[n.RateLimited]:!0,[n.InvalidJSON]:!0,[n.InvalidRequestURL]:!0,[n.InvalidRequest]:!0,[n.ValidationError]:!0,[n.ConflictError]:!0,[n.InternalServerError]:!0,[n.ServiceUnavailable]:!0};t.isHTTPResponseError=function(e){return!!c(e,l)};class p extends d{constructor(e){var t;super({...e,code:a.ResponseError,message:null!==(t=e.message)&&void 0!==t?t:`Request to Notion API failed with status: ${e.status}`}),this.name="UnknownHTTPResponseError"}static isUnknownHTTPResponseError(e){return c(e,{[a.ResponseError]:!0})}}t.UnknownHTTPResponseError=p;const h={[n.Unauthorized]:!0,[n.RestrictedResource]:!0,[n.ObjectNotFound]:!0,[n.RateLimited]:!0,[n.InvalidJSON]:!0,[n.InvalidRequestURL]:!0,[n.InvalidRequest]:!0,[n.ValidationError]:!0,[n.ConflictError]:!0,[n.InternalServerError]:!0,[n.ServiceUnavailable]:!0};class f extends d{constructor(){super(...arguments),this.name="APIResponseError"}static isAPIResponseError(e){return c(e,h)}}t.APIResponseError=f,t.buildRequestError=function(e,t){const r=function(e){if("string"!=typeof e)return;let t;try{t=JSON.parse(e)}catch(e){return}var r;return(0,o.isObject)(t)&&"string"==typeof t.message&&("string"==typeof(r=t.code)&&r in h)?{...t,code:t.code,message:t.message}:void 0}(t);return void 0!==r?new f({code:r.code,message:r.message,headers:e.headers,status:e.status,rawBodyText:t}):new p({message:void 0,headers:e.headers,status:e.status,rawBodyText:t})}},899:(e,t,r)=>{var o=r(398),n=r(901),a=r(155),i={};function s(e,t,r){o.window.showTextDocument(e).then(function(n){n.edit(function(e){t.forEach(function(t){var o=t.line,a=n.document.lineAt(o).text,i=a.replace(/\s*\[id:[a-z0-9-]+\]$/i,"").trimEnd()+" [id:".concat(t.id,"]");if(a!==i){var s=n.document.lineAt(o).range;e.replace(s,i),r&&r("Injected or updated ID ".concat(t.id," for TODO at line ").concat(o+1,": ").concat(t.text))}})}).then(function(t){t?(i[e.uri.toString()]=!0,e.save().then(function(){o.window.showInformationMessage("Injected TODO IDs and saved file."),r&&r("Successfully injected/updated TODO IDs and saved file.")})):(o.window.showErrorMessage("Failed to inject TODO IDs into comments."),r&&r("Failed to inject TODO IDs into comments."))})})}e.exports={syncNotionToCode:function(e,t,r,i){r&&(r.text="TODOtoNOTION: Syncing...",r.show()),o.window.showInformationMessage("Starting sync from Notion to code..."),n.fetchNotionState(e).then(function(e){var n={};e.forEach(function(e){n[e.id]=e});var s=a.scanDocumentsForTodos(t,i),c={};s.forEach(function(e){e.id&&(c[e.id]=e)}),function(e,t){var r=0,n=0;Object.keys(e).forEach(function(a){var i,s=e[a],c=t[a];s&&"Archived"===s.status?c&&(i=c,o.workspace.openTextDocument(i.uri).then(function(e){o.window.showTextDocument(e).then(function(t){t.edit(function(t){var r=e.lineAt(i.line).range;t.delete(r)}).then(function(e){e||o.window.showErrorMessage("Failed to delete TODO with ID ".concat(i.id," from code."))})})}),n++):c&&s&&s.text&&s.text!==c.text&&(function(e,t){o.workspace.openTextDocument(e.uri).then(function(r){o.window.showTextDocument(r).then(function(n){n.edit(function(o){var n=r.lineAt(e.line).range;o.replace(n,t)}).then(function(t){t||o.window.showErrorMessage("Failed to update TODO with ID ".concat(e.id," in code."))})})})}(c,s.text),r++)}),r>0&&o.window.showInformationMessage("Updated ".concat(r," TODOs from Notion.")),n>0&&o.window.showInformationMessage("Deleted ".concat(n," TODOs from code based on Notion state.")),0===r&&0===n&&o.window.showInformationMessage("No changes needed. Code is in sync with Notion.")}(n,c),r&&(r.text="TODOtoNOTION: Idle",r.show())}).catch(function(e){o.window.showErrorMessage("Failed to sync from Notion: ".concat(e.message)),r&&(r.text="TODOtoNOTION: Sync Failed",r.show())})},syncTodosOnSave:function(e,t,r,c){if(i[e.uri.toString()])return c&&c("Skipping sync for programmatic save: ".concat(e.uri.toString())),void(i[e.uri.toString()]=!1);if("file"===e.uri.scheme||"untitled"===e.uri.scheme){var u=e.uri.toString(),d=a.parseTodos(e,c).slice(0,100),l=r[u]||{};if(c("Syncing ".concat(d.length," TODOs for document: ").concat(u)),0===d.length)return c("No TODOs found to sync for document: ".concat(u)),void o.window.showInformationMessage("No TODOs found to sync in current document.");n.syncTodos(t,d,l).then(function(t){var n=t.created,a=t.updated,i=t.deleted;r[u]={},d.forEach(function(e){e.id&&(r[u][e.id]=e)}),s(e,d,c),c("Sync result for ".concat(u,": ").concat(n.length," created, ").concat(a.length," updated, ").concat(i.length," deleted.")),n.length>0&&o.window.showInformationMessage("Synced ".concat(n.length," new TODOs to Notion.")),a.length>0&&o.window.showInformationMessage("Updated ".concat(a.length," TODOs in Notion.")),i.length>0&&o.window.showInformationMessage("Archived ".concat(i.length," TODOs in Notion."))}).catch(function(e){o.window.showErrorMessage("Failed to sync TODOs to Notion: ".concat(e.message)),c("Error syncing TODOs for ".concat(u,": ").concat(e.message))})}else c("Skipping sync for document ".concat(e.uri.fsPath," - invalid scheme."))},injectTodoIds:s}},901:(e,t,r)=>{function o(){var e,t,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,o,a,i){var s=o&&o.prototype instanceof u?o:u,d=Object.create(s.prototype);return n(d,"_invoke",function(r,o,n){var a,i,s,u=0,d=n||[],l=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return a=t,i=0,s=e,p.n=r,c}};function h(r,o){for(i=r,s=o,t=0;!l&&u&&!n&&t<d.length;t++){var n,a=d[t],h=p.p,f=a[2];r>3?(n=f===o)&&(s=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=h&&((n=r<2&&h<a[1])?(i=0,p.v=o,p.n=a[1]):h<f&&(n=r<3||a[0]>o||o>f)&&(a[4]=r,a[5]=o,p.n=f,i=0))}if(n||r>1)return c;throw l=!0,o}return function(n,d,f){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&h(d,f),i=d,s=f;(t=i<2?e:s)||!l;){a||(i?i<3?(i>1&&(p.n=-1),h(i,s)):p.n=s:p.v=s);try{if(u=2,a){if(i||(n="next"),t=a[n]){if(!(t=t.call(a,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(s=TypeError("The iterator does not provide a '"+n+"' method"),i=1);a=e}else if((t=(l=p.n<0)?s:r.call(o,p))!==c)break}catch(t){a=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,a,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var p=[][a]?t(t([][a]())):(n(t={},a,function(){return this}),t),h=l.prototype=u.prototype=Object.create(p);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,n(e,i,"GeneratorFunction")),e.prototype=Object.create(h),e}return d.prototype=l,n(h,"constructor",l),n(l,"constructor",d),d.displayName="GeneratorFunction",n(l,i,"GeneratorFunction"),n(h),n(h,i,"Generator"),n(h,a,function(){return this}),n(h,"toString",function(){return"[object Generator]"}),(o=function(){return{w:s,m:f}})()}function n(e,t,r,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}n=function(e,t,r,o){if(t)a?a(e,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[t]=r;else{var i=function(t,r){n(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}},n(e,t,r,o)}function a(e,t,r,o,n,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function i(e){return function(){var t=this,r=arguments;return new Promise(function(o,n){var i=e.apply(t,r);function s(e){a(i,o,n,s,c,"next",e)}function c(e){a(i,o,n,s,c,"throw",e)}s(void 0)})}}r(398);var s,c=r(611),u=r(420),d=r(957);function l(){return(l=i(o().m(function e(t){return o().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,c.setCredentials(t,s);case 1:return e.a(2,e.v)}},e)}))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return(h=i(o().m(function e(t){return o().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,c.getCredentials(t,s);case 1:return e.a(2,e.v)}},e)}))).apply(this,arguments)}function f(){return(f=i(o().m(function e(t){var r;return o().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,p(t);case 1:return r=e.v,e.n=2,u.fetchNotionState(t,r,s);case 2:return e.a(2,e.v)}},e)}))).apply(this,arguments)}function m(){return(m=i(o().m(function e(t){var r;return o().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,p(t);case 1:return r=e.v,e.n=2,u.listDatabaseProperties(t,r,s);case 2:return e.a(2,e.v)}},e)}))).apply(this,arguments)}function g(){return g=i(o().m(function e(t,r){var n,a,i=arguments;return o().w(function(e){for(;;)switch(e.n){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:{},e.n=1,p(t);case 1:return a=e.v,e.n=2,d.syncTodos(t,a,r,n,s);case 2:return e.a(2,e.v)}},e)})),g.apply(this,arguments)}e.exports={init:function(e){s=e,e("Notion integration initialized.")},setCredentials:function(e){return l.apply(this,arguments)},getCredentials:p,fetchNotionState:function(e){return f.apply(this,arguments)},listDatabaseProperties:function(e){return m.apply(this,arguments)},syncTodos:function(e,t){return g.apply(this,arguments)}}},916:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.oauthIntrospect=t.oauthRevoke=t.oauthToken=t.getFileUpload=t.completeFileUpload=t.sendFileUpload=t.listFileUploads=t.createFileUpload=t.listComments=t.createComment=t.search=t.createDatabase=t.listDatabases=t.queryDatabase=t.updateDatabase=t.getDatabase=t.appendBlockChildren=t.listBlockChildren=t.deleteBlock=t.updateBlock=t.getBlock=t.getPageProperty=t.updatePage=t.getPage=t.createPage=t.listUsers=t.getUser=t.getSelf=void 0,t.getSelf={method:"get",pathParams:[],queryParams:[],bodyParams:[],path:()=>"users/me"},t.getUser={method:"get",pathParams:["user_id"],queryParams:[],bodyParams:[],path:e=>`users/${e.user_id}`},t.listUsers={method:"get",pathParams:[],queryParams:["start_cursor","page_size"],bodyParams:[],path:()=>"users"},t.createPage={method:"post",pathParams:[],queryParams:[],bodyParams:["parent","properties","icon","cover","content","children"],path:()=>"pages"},t.getPage={method:"get",pathParams:["page_id"],queryParams:["filter_properties"],bodyParams:[],path:e=>`pages/${e.page_id}`},t.updatePage={method:"patch",pathParams:["page_id"],queryParams:[],bodyParams:["properties","icon","cover","archived","in_trash"],path:e=>`pages/${e.page_id}`},t.getPageProperty={method:"get",pathParams:["page_id","property_id"],queryParams:["start_cursor","page_size"],bodyParams:[],path:e=>`pages/${e.page_id}/properties/${e.property_id}`},t.getBlock={method:"get",pathParams:["block_id"],queryParams:[],bodyParams:[],path:e=>`blocks/${e.block_id}`},t.updateBlock={method:"patch",pathParams:["block_id"],queryParams:[],bodyParams:["embed","type","archived","in_trash","bookmark","image","video","pdf","file","audio","code","equation","divider","breadcrumb","table_of_contents","link_to_page","table_row","heading_1","heading_2","heading_3","paragraph","bulleted_list_item","numbered_list_item","quote","to_do","toggle","template","callout","synced_block","table","column"],path:e=>`blocks/${e.block_id}`},t.deleteBlock={method:"delete",pathParams:["block_id"],queryParams:[],bodyParams:[],path:e=>`blocks/${e.block_id}`},t.listBlockChildren={method:"get",pathParams:["block_id"],queryParams:["start_cursor","page_size"],bodyParams:[],path:e=>`blocks/${e.block_id}/children`},t.appendBlockChildren={method:"patch",pathParams:["block_id"],queryParams:[],bodyParams:["children","after"],path:e=>`blocks/${e.block_id}/children`},t.getDatabase={method:"get",pathParams:["database_id"],queryParams:[],bodyParams:[],path:e=>`databases/${e.database_id}`},t.updateDatabase={method:"patch",pathParams:["database_id"],queryParams:[],bodyParams:["title","description","icon","cover","properties","is_inline","archived","in_trash"],path:e=>`databases/${e.database_id}`},t.queryDatabase={method:"post",pathParams:["database_id"],queryParams:["filter_properties"],bodyParams:["sorts","filter","start_cursor","page_size","archived","in_trash"],path:e=>`databases/${e.database_id}/query`},t.listDatabases={method:"get",pathParams:[],queryParams:["start_cursor","page_size"],bodyParams:[],path:()=>"databases"},t.createDatabase={method:"post",pathParams:[],queryParams:[],bodyParams:["parent","properties","icon","cover","title","description","is_inline"],path:()=>"databases"},t.search={method:"post",pathParams:[],queryParams:[],bodyParams:["sort","query","start_cursor","page_size","filter"],path:()=>"search"},t.createComment={method:"post",pathParams:[],queryParams:[],bodyParams:["parent","rich_text","discussion_id"],path:()=>"comments"},t.listComments={method:"get",pathParams:[],queryParams:["block_id","start_cursor","page_size"],bodyParams:[],path:()=>"comments"},t.createFileUpload={method:"post",pathParams:[],queryParams:[],bodyParams:["mode","filename","content_type","number_of_parts","external_url"],path:()=>"file_uploads"},t.listFileUploads={method:"get",pathParams:[],queryParams:["status","start_cursor","page_size"],bodyParams:[],path:()=>"file_uploads"},t.sendFileUpload={method:"post",pathParams:["file_upload_id"],queryParams:[],bodyParams:[],formDataParams:["file","part_number"],path:e=>`file_uploads/${e.file_upload_id}/send`},t.completeFileUpload={method:"post",pathParams:["file_upload_id"],queryParams:[],bodyParams:[],path:e=>`file_uploads/${e.file_upload_id}/complete`},t.getFileUpload={method:"get",pathParams:["file_upload_id"],queryParams:[],bodyParams:[],path:e=>`file_uploads/${e.file_upload_id}`},t.oauthToken={method:"post",pathParams:[],queryParams:[],bodyParams:["grant_type","code","redirect_uri","external_account"],path:()=>"oauth/token"},t.oauthRevoke={method:"post",pathParams:[],queryParams:[],bodyParams:["token"],path:()=>"oauth/revoke"},t.oauthIntrospect={method:"post",pathParams:[],queryParams:[],bodyParams:["token"],path:()=>"oauth/introspect"}},928:e=>{"use strict";e.exports=require("path")},957:(e,t,r)=>{function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function a(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",n=r.toStringTag||"@@toStringTag";function s(r,o,n,a){var s=o&&o.prototype instanceof u?o:u,d=Object.create(s.prototype);return i(d,"_invoke",function(r,o,n){var a,i,s,u=0,d=n||[],l=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return a=t,i=0,s=e,p.n=r,c}};function h(r,o){for(i=r,s=o,t=0;!l&&u&&!n&&t<d.length;t++){var n,a=d[t],h=p.p,f=a[2];r>3?(n=f===o)&&(s=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=h&&((n=r<2&&h<a[1])?(i=0,p.v=o,p.n=a[1]):h<f&&(n=r<3||a[0]>o||o>f)&&(a[4]=r,a[5]=o,p.n=f,i=0))}if(n||r>1)return c;throw l=!0,o}return function(n,d,f){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&h(d,f),i=d,s=f;(t=i<2?e:s)||!l;){a||(i?i<3?(i>1&&(p.n=-1),h(i,s)):p.n=s:p.v=s);try{if(u=2,a){if(i||(n="next"),t=a[n]){if(!(t=t.call(a,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(s=TypeError("The iterator does not provide a '"+n+"' method"),i=1);a=e}else if((t=(l=p.n<0)?s:r.call(o,p))!==c)break}catch(t){a=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,n,a),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var p=[][o]?t(t([][o]())):(i(t={},o,function(){return this}),t),h=l.prototype=u.prototype=Object.create(p);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,i(e,n,"GeneratorFunction")),e.prototype=Object.create(h),e}return d.prototype=l,i(h,"constructor",l),i(l,"constructor",d),d.displayName="GeneratorFunction",i(l,n,"GeneratorFunction"),i(h),i(h,n,"Generator"),i(h,o,function(){return this}),i(h,"toString",function(){return"[object Generator]"}),(a=function(){return{w:s,m:f}})()}function i(e,t,r,o){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}i=function(e,t,r,o){if(t)n?n(e,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[t]=r;else{var a=function(t,r){i(e,t,function(e){return this._invoke(t,r,e)})};a("next",0),a("throw",1),a("return",2)}},i(e,t,r,o)}function s(e,t,r,o,n,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(o,n)}function c(e){return function(){var t=this,r=arguments;return new Promise(function(o,n){var a=e.apply(t,r);function i(e){s(a,o,n,i,c,"next",e)}function c(e){s(a,o,n,i,c,"throw",e)}i(void 0)})}}var u=r(398),d=r(420);function l(e,t,r,o){return p.apply(this,arguments)}function p(){return(p=c(a().m(function e(t,r,o,n){var i,s,c,l,p,h,f,m,g;return a().w(function(e){for(;;)switch(e.n){case 0:if(e.p=0,i=r.token,s=r.databaseId,i&&s){e.n=1;break}return u.window.showErrorMessage("Notion integration not configured. Please set credentials first."),n("Notion credentials not configured for createTodo."),e.a(2,null);case 1:return c=d.getNotionClient(i),l={Name:{title:[{text:{content:o.text}}]},Type:{select:{name:o.type||"TODO"}},Status:{select:{name:o.status||"Not started"}}},e.n=2,d.listDatabaseProperties(t,r,n);case 2:return p=e.v,h=[],p?(p["File Path"]&&o.filePath?l["File Path"]={rich_text:[{text:{content:o.filePath||"Unknown"}}]}:p["File Path"]||h.push("File Path"),p["Line Number"]&&void 0!==o.lineNumber?l["Line Number"]={rich_text:[{text:{content:String(o.lineNumber)}}]}:p["Line Number"]||h.push("Line Number"),p.TODO_ID&&o.id?l.TODO_ID={rich_text:[{text:{content:o.id}}]}:p.TODO_ID||h.push("TODO_ID")):(n("Could not fetch database properties, using only essential properties for TODO creation."),u.window.showWarningMessage("Could not verify Notion database properties. Only essential fields will be set for the TODO."),h=["File Path","Line Number","ID"]),e.n=3,c.pages.create({parent:{database_id:s},properties:l});case 3:return f=e.v,h.length>0&&(n("Note: The following properties were not set for TODO creation due to schema mismatch: "+h.join(", ")+". Available data - File Path: "+(o.filePath||"Unknown")+", Line Number: "+(o.lineNumber||0)),u.window.showWarningMessage("TODO created without: "+h.join(", ")+". Ensure these properties (especially 'Line Number') are defined in your Notion database schema to track TODO locations accurately.")),m=f.id,n("Created TODO in Notion with ID: ".concat(m," for text: ").concat(o.text)),u.window.showInformationMessage("Created TODO in Notion: ".concat(o.text)),e.a(2,m);case 4:return e.p=4,(g=e.v).message.includes("Could not find database with ID")?(u.window.showErrorMessage("Failed to create TODO in Notion: Database ID ".concat(r.databaseId," not found. Ensure the database is shared with your integration."),"Set Credentials").then(function(e){"Set Credentials"===e&&u.commands.executeCommand("TODOtoNOTION.setCredentials")}),n("Error creating TODO in Notion: Database not found - "+g.message)):g.message.includes("API token is invalid")?(u.window.showErrorMessage("Failed to create TODO in Notion: Invalid API token. Please update your credentials.","Set Credentials").then(function(e){"Set Credentials"===e&&u.commands.executeCommand("TODOtoNOTION.setCredentials")}),n("Error creating TODO in Notion: Invalid API token - "+g.message)):(u.window.showErrorMessage("Failed to create TODO in Notion: "+g.message),n("Error creating TODO in Notion: "+g.message)),e.a(2,null)}},e,null,[[0,4]])}))).apply(this,arguments)}function h(e,t,r,o,n){return f.apply(this,arguments)}function f(){return(f=c(a().m(function e(t,r,o,n,i){var s,c,l,p,h,f;return a().w(function(e){for(;;)switch(e.n){case 0:if(e.p=0,s=r.token){e.n=1;break}return u.window.showErrorMessage("Notion integration not configured. Please set credentials first."),i("Notion credentials not configured for updateTodo."),e.a(2,!1);case 1:return c=d.getNotionClient(s),l={Name:{title:[{text:{content:n.text}}]},Type:{select:{name:n.type||"TODO"}},Status:{select:{name:n.status||"Not started"}}},e.n=2,d.listDatabaseProperties(t,r,i);case 2:return p=e.v,h=[],p?(p["File Path"]&&n.filePath?l["File Path"]={rich_text:[{text:{content:n.filePath||"Unknown"}}]}:p["File Path"]||h.push("File Path"),p["Line Number"]&&void 0!==n.lineNumber?l["Line Number"]={rich_text:[{text:{content:String(n.lineNumber)}}]}:p["Line Number"]||h.push("Line Number"),p.TODO_ID&&n.id?l.TODO_ID={rich_text:[{text:{content:n.id}}]}:p.TODO_ID||h.push("TODO_ID")):(i("Could not fetch database properties, using only essential properties for TODO update."),u.window.showWarningMessage("Could not verify Notion database properties. Only essential fields will be updated for the TODO."),h=["File Path","Line Number","TODO_ID"]),e.n=3,c.pages.update({page_id:o,properties:l});case 3:return e.v,h.length>0&&(i("Note: The following properties were not updated for TODO due to schema mismatch: "+h.join(", ")+". Available data - File Path: "+(n.filePath||"Unknown")+", Line Number: "+(n.lineNumber||0)),u.window.showWarningMessage("TODO updated without: "+h.join(", ")+". Ensure these properties (especially 'Line Number') are defined in your Notion database schema to track TODO locations accurately.")),i("Updated TODO in Notion with ID: ".concat(o)),u.window.showInformationMessage("Updated TODO in Notion: ".concat(n.text)),e.a(2,!0);case 4:return e.p=4,(f=e.v).message.includes("API token is invalid")?(u.window.showErrorMessage("Failed to update TODO in Notion: Invalid API token. Please update your credentials.","Set Credentials").then(function(e){"Set Credentials"===e&&u.commands.executeCommand("TODOtoNOTION.setCredentials")}),i("Error updating TODO in Notion: Invalid API token - "+f.message)):(u.window.showErrorMessage("Failed to update TODO in Notion: "+f.message),i("Error updating TODO in Notion: "+f.message)),e.a(2,!1)}},e,null,[[0,4]])}))).apply(this,arguments)}function m(e,t,r,o){return g.apply(this,arguments)}function g(){return(g=c(a().m(function e(t,r,o,n){var i,s,c;return a().w(function(e){for(;;)switch(e.n){case 0:if(e.p=0,i=r.token){e.n=1;break}return u.window.showErrorMessage("Notion integration not configured. Please set credentials first."),n("Notion credentials not configured for deleteTodo."),e.a(2,!1);case 1:return s=d.getNotionClient(i),e.n=2,s.pages.update({page_id:o,archived:!0});case 2:return e.v,n("Archived TODO in Notion with ID: ".concat(o)),u.window.showInformationMessage("Archived TODO in Notion with ID: ".concat(o)),e.a(2,!0);case 3:return e.p=3,(c=e.v).message.includes("API token is invalid")?(u.window.showErrorMessage("Failed to delete TODO in Notion: Invalid API token. Please update your credentials.","Set Credentials").then(function(e){"Set Credentials"===e&&u.commands.executeCommand("TODOtoNOTION.setCredentials")}),n("Error deleting TODO in Notion: Invalid API token - "+c.message)):(u.window.showErrorMessage("Failed to delete TODO in Notion: "+c.message),n("Error deleting TODO in Notion: "+c.message)),e.a(2,!1)}},e,null,[[0,3]])}))).apply(this,arguments)}function y(){return y=c(a().m(function e(t,r,n){var i,s,c,p,f,g,y,b,v,O,w,P,T,k,N,D,I,_,x,E,q,C,F,S,j,R,U,M,A=arguments;return a().w(function(e){for(;;)switch(e.n){case 0:if(i=A.length>3&&void 0!==A[3]?A[3]:{},s=A.length>4?A[4]:void 0,e.p=1,c=r.token,p=r.databaseId,c&&p){e.n=2;break}return u.window.showErrorMessage("Notion integration not configured. Please set credentials first."),s("Notion credentials not configured for syncTodos."),e.a(2,{created:[],updated:[],deleted:[]});case 2:return f=[],g=[],y=[],s("Starting batch TODO sync with Notion..."),u.window.showInformationMessage("Starting batch TODO sync with Notion..."),e.n=3,d.fetchNotionState(t,r,s);case 3:b=e.v,v={},O={},b.forEach(function(e){O[e.id]=e,e.customId&&(v[e.customId]=e.id)}),w=o(n),e.p=4,w.s();case 5:if((P=w.n()).done){e.n=13;break}if((T=P.value).id){e.n=6;break}return s('Unexpected: TODO without ID for text: "'.concat(T.text,'". IDs should be generated in code.')),u.window.showErrorMessage('Unexpected: TODO without ID for text: "'.concat(T.text,'". Please check the extension logic.')),e.a(3,12);case 6:if(!v[T.id]){e.n=10;break}if(k=v[T.id],s("TODO exists in Notion with ID from code: ".concat(T.id," (page ID: ").concat(k,"), checking for updates")),N=O[k],D=!1,N.text===T.text&&N.filePath===T.filePath&&N.lineNumber===T.lineNumber&&N.type===T.type&&N.status===T.status||(D=!0),!D){e.n=8;break}return s("Updating TODO with ID: ".concat(T.id,", Line Number: ").concat(T.lineNumber)),e.n=7,h(t,r,k,{text:T.text,type:T.type,status:T.status,filePath:T.filePath,lineNumber:T.lineNumber,id:T.id},s);case 7:e.v?(g.push(T),s("Updated TODO with ID: ".concat(T.id," in Notion"))):s("Failed to update TODO with ID: ".concat(T.id," in Notion")),e.n=9;break;case 8:s("No changes detected for TODO with ID: ".concat(T.id,", skipping update"));case 9:e.n=12;break;case 10:return s("No TODO in Notion with ID: ".concat(T.id,". Creating new TODO in Notion.")),e.n=11,l(t,r,T,s);case 11:(I=e.v)&&(f.push(T),s("Created TODO with ID: ".concat(T.id," and page ID: ").concat(I," in Notion")));case 12:e.n=5;break;case 13:e.n=15;break;case 14:e.p=14,U=e.v,w.e(U);case 15:return e.p=15,w.f(),e.f(15);case 16:if(Object.keys(i).length>0)for(s("Checking for TODOs to delete in Notion..."),_=Object.keys(i),x=0,E=_;x<E.length;x++)q=E[x],v[q]||(C=i[q],y.push(C),s("Marked TODO for deletion in Notion: ".concat(C," (ID from code: ").concat(q,")")));F=0,S=y;case 17:if(!(F<S.length)){e.n=20;break}return j=S[F],e.n=18,m(t,r,j,s);case 18:R=e.v,s(R?"Deleted TODO in Notion with ID: ".concat(j):"Failed to delete TODO in Notion with ID: ".concat(j));case 19:F++,e.n=17;break;case 20:return s("Batch TODO sync with Notion completed."),u.window.showInformationMessage("Batch TODO sync with Notion completed."),e.a(2,{created:f,updated:g,deleted:y});case 21:return e.p=21,M=e.v,u.window.showErrorMessage("Failed to sync TODOs with Notion: "+M.message),s("Error syncing TODOs with Notion: "+M.message),e.a(2,{created:[],updated:[],deleted:[]})}},e,null,[[4,14,15,16],[1,21]])})),y.apply(this,arguments)}e.exports={createTodo:l,updateTodo:h,deleteTodo:m,syncTodos:function(e,t,r){return y.apply(this,arguments)}}}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,r),a.exports}var o,n,a,i,s,c,u,d,l={};n=l,a=r(398),r(928),i=r(901),s=r(19),c=r(899),u={},d={},n.activate=function(e){var t;function r(e){if(t){var r=new Date;t.appendLine(r.toLocaleTimeString("en",{hour12:!1})+"."+String(r.getMilliseconds()).padStart(3,"0")+" "+e)}}r("Starting TODOtoNOTION extension activation process.");try{i.init(r),r("Notion integration initialized successfully."),a.window.showInformationMessage("TODOtoNOTION: Notion integration initialized."),i.getCredentials(e).then(function(e){e.token&&e.databaseId?r("Notion credentials check: Set."):(a.window.showWarningMessage("TODOtoNOTION: Notion credentials are not set. Please set your Notion API token and Database ID.","Set Credentials").then(function(e){"Set Credentials"===e&&a.commands.executeCommand("TODOtoNOTION.setCredentials")}),r("Notion credentials check: Not set."))}).catch(function(e){a.window.showErrorMessage("TODOtoNOTION: Failed to check Notion credentials: "+e.message),r("Error checking Notion credentials: "+e.message)})}catch(e){a.window.showErrorMessage("TODOtoNOTION: Failed to initialize Notion integration: "+e.message),r("Error initializing Notion integration: "+e.message)}try{c.syncNotionToCode(e,u,o,r),r("Initial Notion sync triggered successfully."),a.window.showInformationMessage("TODOtoNOTION: Initial Notion sync started.")}catch(e){a.window.showErrorMessage("TODOtoNOTION: Failed to perform initial Notion sync: "+e.message),r("Error during initial Notion sync: "+e.message)}(o=a.window.createStatusBarItem(a.StatusBarAlignment.Left,-1)).text="TODOtoNOTION: Idle",o.tooltip="Notion Sync Status",o.show(),e.subscriptions.push(o),s.registerCommands(e,function(){return c.syncNotionToCode(e,u,o,r)},r),s.registerEventListeners(e,u,d,r),t&&(t.dispose(),t=void 0),t=a.window.createOutputChannel("TODOtoNOTION"),e.subscriptions.push(t)},n.deactivate=function(){},module.exports=l})();